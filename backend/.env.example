# Environment Configuration for Bank Statement Analyzer
# Copy this file to .env and update with your values

# =============================================================================
# ENVIRONMENT
# =============================================================================
# Options: development, staging, production
# Affects logging, validation strictness, and default behaviors
ENVIRONMENT=development

# Enable debug mode (verbose logging, detailed errors)
# Set to False in production
DEBUG=True

# =============================================================================
# SECURITY
# =============================================================================
# JWT Secret Key - CRITICAL: Generate a strong random key for production
# Generate with: openssl rand -hex 32
# OR: python -c "import secrets; print(secrets.token_urlsafe(32))"
SECRET_KEY=your-secret-key-here-generate-with-openssl-rand-hex-32

# JWT token expiration time in minutes (default: 10080 = 7 days)
ACCESS_TOKEN_EXPIRE_MINUTES=10080

# =============================================================================
# DATABASE
# =============================================================================
# Database connection URL
# SQLite (default for development):
DATABASE_URL=sqlite:///./statement_analyzer.db

# PostgreSQL (recommended for production):
# DATABASE_URL=postgresql://user:password@localhost:5432/statement_analyzer

# MySQL/MariaDB:
# DATABASE_URL=mysql+pymysql://user:password@localhost:3306/statement_analyzer

# =============================================================================
# CORS (Cross-Origin Resource Sharing)
# =============================================================================
# Comma-separated list of allowed origins for CORS
# Development:
ALLOWED_ORIGINS=http://localhost:3000,http://localhost:8000

# Production example (update with your actual domains):
# ALLOWED_ORIGINS=https://yourdomain.com,https://www.yourdomain.com

# =============================================================================
# API SERVER
# =============================================================================
# Host to bind the API server (0.0.0.0 allows external connections)
API_HOST=0.0.0.0

# Port for the API server
API_PORT=8000

# =============================================================================
# LOGGING
# =============================================================================
# Log level: DEBUG, INFO, WARNING, ERROR, CRITICAL
# Auto-set based on DEBUG if not specified
LOG_LEVEL=INFO

# =============================================================================
# FILE UPLOAD
# =============================================================================
# Maximum upload file size in megabytes
MAX_UPLOAD_SIZE_MB=50

# =============================================================================
# RATE LIMITING
# =============================================================================
# Enable/disable rate limiting
RATE_LIMIT_ENABLED=True

# Standard rate limits for most API endpoints
RATE_LIMIT_PER_MINUTE=60
RATE_LIMIT_PER_HOUR=1000

# Stricter rate limits for file upload endpoints (resource-intensive)
UPLOAD_RATE_LIMIT_PER_MINUTE=10
UPLOAD_RATE_LIMIT_PER_HOUR=100

# Lenient rate limits for read-only GET endpoints
READ_RATE_LIMIT_PER_MINUTE=120
READ_RATE_LIMIT_PER_HOUR=2000

# =============================================================================
# CLOUD FILE STORAGE
# =============================================================================
# Storage backend: local, s3, azure, gcs
# Use 'local' for development, cloud providers for production
STORAGE_BACKEND=local

# Local Storage (development only)
LOCAL_STORAGE_PATH=./uploads

# AWS S3 Settings (when STORAGE_BACKEND=s3)
S3_BUCKET_NAME=your-bucket-name
S3_REGION=us-east-1
S3_ACCESS_KEY=your-access-key-id
S3_SECRET_KEY=your-secret-access-key

# Azure Blob Storage Settings (when STORAGE_BACKEND=azure)
AZURE_STORAGE_CONNECTION_STRING=DefaultEndpointsProtocol=https;AccountName=youraccountname;AccountKey=yourkey;EndpointSuffix=core.windows.net
AZURE_CONTAINER_NAME=your-container-name

# Google Cloud Storage Settings (when STORAGE_BACKEND=gcs)
GCS_BUCKET_NAME=your-bucket-name
GCS_CREDENTIALS_PATH=/path/to/service-account-key.json
GCS_PROJECT_ID=your-project-id

# Signed URL expiration time in seconds (default: 3600 = 1 hour)
SIGNED_URL_EXPIRATION_SECONDS=3600

# =============================================================================
# REDIS CACHE
# =============================================================================
# Enable/disable response caching for improved performance
CACHE_ENABLED=true

# Redis connection URL for cache (uses db=1, Celery uses db=0)
# Format: redis://host:port/db
REDIS_CACHE_URL=redis://localhost:6379/1

# Cache TTL (Time To Live) in seconds for different endpoint types
# Default: 5 minutes for most endpoints
CACHE_TTL_DEFAULT=300

# Transactions endpoint cache (5 minutes)
CACHE_TTL_TRANSACTIONS=300

# Summary endpoints cache (30 minutes)
CACHE_TTL_SUMMARIES=1800

# Rules endpoint cache (1 hour)
CACHE_TTL_RULES=3600

# Sessions list cache (10 minutes)
CACHE_TTL_SESSIONS=600

# =============================================================================
# SENTRY ERROR MONITORING
# =============================================================================
# Sentry DSN (Data Source Name) from your Sentry project settings
# Get this from: https://sentry.io/settings/[your-org]/projects/[your-project]/keys/
# Leave empty to disable Sentry error monitoring
SENTRY_DSN=https://b890b77ecd6ca31794f6ee70191c5426@o4510873281363968.ingest.us.sentry.io/4510873288704000

# Enable/disable Sentry (automatically disabled if SENTRY_DSN is empty)
SENTRY_ENABLED=true

# Sentry environment name (helps organize errors by deployment environment)
# Typically: development, staging, production
SENTRY_ENVIRONMENT=development

# Sentry traces sample rate (0.0 to 1.0)
# 1.0 = capture 100% of transactions (expensive, use in development only)
# 0.1 = capture 10% of transactions (recommended for production)
# 0.01 = capture 1% of transactions (for high-traffic production)
SENTRY_TRACES_SAMPLE_RATE=0.1

# Sentry profiling sample rate (0.0 to 1.0)
# Profiles provide detailed performance data for sampled transactions
# Usually set equal to or lower than SENTRY_TRACES_SAMPLE_RATE
SENTRY_PROFILES_SAMPLE_RATE=0.1

# Send personally identifiable information (PII) to Sentry
# Set to false in production to comply with privacy regulations (GDPR, etc.)
# When false, user IDs and IP addresses are still sent (anonymized)
SENTRY_SEND_DEFAULT_PII=false

# =============================================================================
# INSTRUCTIONS
# =============================================================================
# 1. Copy this file: cp .env.example .env
# 2. Update SECRET_KEY with a strong random value
# 3. Update DATABASE_URL if not using SQLite
# 4. Update ALLOWED_ORIGINS with your frontend URLs
# 5. Set ENVIRONMENT=production when deploying
# 6. Setup Sentry (optional but recommended for production):
#    a. Create account at https://sentry.io
#    b. Create a new project (Python/FastAPI)
#    c. Copy the DSN from project settings
#    d. Set SENTRY_DSN in your .env file
# 6. Set DEBUG=False in production
# =============================================================================
